#Assignment 2
using Random
using Distributions
using StatsBase

T=24
Capacity = 200 #MW
Random.seed!(123)
#Wind power production forecast
#https://data.fingrid.fi/en/data?datasets=245
#We have 28 days of data

P_t_omega_real = 
[3559.475	3400.575	3397.65	3428.15	3256.55	3054.25	2783.2	2386	1796.9	1483.475	1334.5	1181	1078.7	1178.325	1542.125	2037.525	2393.675	2364.2	2149.6	1893.675	1580.825	1315.35	1071.55	890.8;
815.15	782.3	726.325	703.25	690.85	647.65	544.75	406.45	303.3	233.05	195.35	162.4	149.675	145.075	130.95	163.975	207.875	237.9	244.8	237.575	237	225.275	225.925	270.65;
317.25	351.7	397.625	480.75	517.325	613.55	607.575	557.775	561.9	542.375	510.05	451.175	402.675	385.45	402.1	525.375	668.2	699.925	671.575	733.025	720.775	588.525	506.65	479.85;
431.275	441.6	454.5	403.65	366.975	373.725	383	321.475	237.625	230.825	267.775	283.75	294.575	312.875	344.225	433.575	553.625	600.725	611	640.275	609.925	557.225	501	464.6;
454.275	506.925	583.1	591.15	570.525	551.3	497.5	375.775	269.125	216.55	189.925	163.075	169.8	207.725	248.8	317.825	383.35	413	376.85	319.075	291.775	272.8	291.6	283.425;
275.175	309.1	351.45	371.225	378.1	388.5	337.775	290.25	301.1	293.5	315.9	327.475	360.425	396.675	453.475	490.225	534.1	562.125	573.2	550.3	560.725	554.95	570.9	601.25;
656	761.025	799.275	813.325	779.4	658.6	548.45	443.675	419.925	354.425	283.675	265.65	274.275	316.625	333.1	413.15	527.95	546.875	508.8	419.05	316.15	228.1	192.1	210.175;
228.3	260.425	312.175	368.3	433.1	483.3	523.775	501.2	463.125	421.25	400.3	421.45	484.7	556.65	666.95	803.275	973.45	1089.8	1197.2	1190.55	1186.1	1232.65	1152.8	1060.6;
968.75	922.85	919.925	898.65	867	811.15	874.975	809.75	567.6	647.075	612.45	530.425	626.05	884.6	1160	1479.475	1817	2155.5	2483.025	2637.025	2644.05	2577.375	2511.95	2463.85;
2394.675	2310.025	2240.325	2147.725	1993.975	1684.2	1511.15	990	604.375	546.675	622.925	581.15	530.125	515.125	574.225	708.35	819.075	840.35	817.175	754.575	722.2	866.65	1023.1	1246.625;
1463.9	1516.625	1546.075	1594.1	1654.25	1742.05	1694	1595.325	1143.075	1088.775	854.55	618.9	582.625	685.75	863.575	1026.15	1200.325	1465.55	1724	2102.675	2270.075	2321.275	2244.05	2025.35;
1892.55	1772.7	1604.025	1466.8	1377.275	1262.925	1297.925	1074.35	823.4	741.225	640.475	525.7	433.35	450.7	511.375	568.775	638.8	772.05	923	1063.75	1258.95	1511.75	1763.775	2160.125;
2546.5	2895.25	3268.8	3699.2	4343.45	4915.825	5322.35	5619.6	5835.95	5905.4	5912.675	5933.175	5929.8	5840.9	5609.55	5330.775	5226.8	5280.15	5356.425	5380.425	5376.725	5398	4697.45	4377.925;
4258.85	4397.425	4210.35	4653.725	4779.125	4769.275	4681.6	4123.675	3273.45	2674.15	2389.775	2127.675	1871.675	1773.175	2013.65	2477.725	2674.875	2584.65	2386.225	2219.025	2150.65	1879.25	1700.025	1536.875;
1271.375	1104.45	1093.575	1324.2	1458.05	1507.625	1357.8	1142.825	1123.35	1317.85	1509.575	1623.725	1806.15	2072.9	2548.075	3049.625	3422.2	3491.8	3612.375	3859.875	4113.775	4223.15	4340.825	4558.4;
4682.7	4525.45	4302.275	4261.9	4080.775	3739.6	3204.6	2211.05	1544.325	1617.025	1578.625	1491.375	1512.75	1498.75	1503.7	1514.8	1457.3	1390.95	1338.325	1401.1	1590.425	2028.05	2472.275	2946.725;
3535.725	4051.25	4440.15	4703.05	4978.275	5021.9	5174.975	4685.425	3122.125	2387.825	2047.3	1849	1803.075	1770.475	1802.675	2035.85	2408.175	2693.825	3091.225	3575.025	3916.95	4016.1	4194.85	4345.45;
4385.5	4298.925	4082.65	3808.7	3552.75	3331.275	3566.65	3044.15	1993.05	1482.95	1348.075	1292.125	1346.8	1496.025	1713.325	2122.725	2767.925	3337.075	3613.875	3764.425	3828.65	3935.9	3942.525	3921.875;
3946.85	3952.4	3880.875	3790.5	3723.9	3546.7	3018.475	2549.775	2421.05	2174.425	2019.925	1967.9	2087.325	2232.225	2214.55	2278.525	2620.825	2824.475	2696.35	2508.3	2451.45	2321.4	2121.575	1860.125;
1583.4	1341.45	1105.025	950.225	839.275	645.775	472	361.725	274.5	187.7	134.325	114.825	102.75	105.8	114.075	157.05	190.375	197.775	225.8	260.85	356.025	512.325	718.775	875.3;
945.3	1152.55	1486.575	1759.95	1947.575	1920.4	1945.925	2032.225	2164.1	2182.6	2160.3	2188.325	2243.6	2163.6	2113.325	2126.95	2055.05	1796.275	1544.4	1357.925	1213.25	1147.925	1070.85	1051.225;
1050.1	1108.025	1203.5	1294.45	1378.65	1381.85	1420.75	1524.35	1572.25	1535.375	1517.15	1534.1	1553.65	1601.6	1612.85	1650.8	1708.575	1760.8	1724.875	1708.05	1609.725	1547.75	1497.55	1435.975;
1353.825	1252.1	1232.1	1220.15	1113.775	989.55	881.05	792.875	722.025	630.525	543.975	468.25	467.55	512.5	575.6	595.75	696.25	844.6	947.05	910.15	831.025	742.175	704.2	676.225;
685.95	695.85	632.75	570.325	494.75	364.925	270.5	205.525	150.05	127.1	115.75	132.075	145.25	151.7	141.075	150.975	193.7	250.925	253.5	233.25	175.4	125.025	123.6	131.425;
127.2	114.925	106.5	86.925	86.725	78.45	78.775	69.5	63.3	47.9	41.2	49	46.775	49.05	55.525	64.45	104.475	213.5	412.575	806.45	1268.125	1448.625	1660	2013.675;
2260.575	2418.275	2492.575	2464.1	2458.325	2507.825	2362.75	2075.55	2175.425	1877.375	1619.375	1688.925	1853.775	2036.65	2175.4	2423	2836.35	3220.225	3438.125	3604.3	3699.075	3494	3315.1	3275.625;
3190.175	3134.25	3210.675	3355.6	3393.95	3059.25	2565.875	1928.85	1327.1	1008.45	894.525	812.1	738.75	713.45	846.675	1201.775	1753.425	2182.675	2393.8	2532.825	2358.775	2130.475	1846.8	1605.025;
1563.65	1793.625	2126.2	2280.15	2394.45	2580.075	2484.475	2120.225	1740.45	1861.2	1967.075	1980.65	2054.725	2185.575	2534.525	2972.15	3334.65	3476.275	3528.45	3481.4	3414.1	3467.925	3541.525	3650.8

]*Capacity/7147.7

#7147.7 is the power capacity forecast for the days from the 02/03/2024 to the 29/03/2024

#Dayahead price forecast found on Nord pool
lambda_t_omega_DA =
[446.87	417.65	417.57	413.55	409.08	417.35	421.75	438.3	445.38	490.1	450.52	441.13	416.16	409.22	446.2	492.56	544.14	601.02	697.69	670.11	573.81	520.36	454.25	409.9;
406.25	399.76	401.03	414.37	412.29	416.09	417.43	423.99	408.26	402.45	387.69	368.68	354.14	316.87	349.15	403.49	449.33	563.38	628.83	593.57	597.89	559.06	463.27	539.83;
515.3	506.13	502.48	493.61	488.92	527.97	605.12	720.59	767.55	633.75	530.96	459.99	454.85	454.55	457.53	446.28	450.38	582.02	555.26	482.28	467.07	454.78	447.1	444.26;
418.97	420.98	420.83	420.09	420.91	427.76	435.14	449.45	456.46	444.54	441.11	441.4	436.86	436.71	440.21	444.61	452.36	550.53	778.01	720.02	584.51	544.64	491.94	521.75;
529.23	527	525.21	519.84	525.21	550.92	625.98	794.89	810.25	650.06	565.91	536.83	516.93	516.49	526.55	538.62	604.22	745.4	891.35	888.89	696.2	597.44	581.26	554.13;
546.58	539.05	524.29	512.14	520.94	545.09	628.12	769.22	720.77	589.51	531.52	493.14	459.82	449.16	472.04	492.24	521.16	664.87	787.93	673.07	614.85	546.73	546.5	504.76;
510.27	499.16	499.53	491.93	494.24	500.28	618.06	708.63	662.64	554.32	429.31	388.16	392.11	382.2	371.24	300.05	415.52	536.58	624.4	596.22	530.62	483.8	482.98	446.46;
421.65	409.35	400.48	391.83	362.31	356.27	376.25	395.55	395.55	358.73	245.56	1.49	8.57	18.34	0.3	210.15	392.42	457.65	462.65	448.48	426.72	424.18	414.64	405.32;
362.66	343.35	305.49	265.01	241.45	240.63	252.78	294.38	259.57	188.23	17.52	0.3	0	0	0.15	107.42	357.52	417.23	429.68	422.07	400.01	398.07	395.68	388.01;
364.75	367.73	374.29	367.36	372.65	409.62	420.73	464.19	482.98	468.52	461.43	450.55	438.7	439.22	437.73	446.9	459.27	486.93	560.5	537.47	515.85	503.55	482.23	490.28;
515.81	488.75	495.83	486.06	491.73	532.06	649.03	719.78	751.31	699.35	636.8	601.47	584.77	583.43	589.09	643.66	757.5	842.86	1005.83	928.67	726.71	623.46	588.42	524.31;
476.73	464.58	460.77	454.06	446.46	464.58	576.58	570.25	669.65	573.08	502.46	468.31	460.03	443.03	437.28	427.29	453.39	493.06	538.48	486.13	384.41	406.86	400.97	386.13;
386.42	376.2	370.09	366.36	378.14	384.26	421.32	431.91	444.81	431.68	390.89	371.65	370.68	350.18	355.92	400.29	416.4	505.66	500.21	434.37	417.51	411.18	406.03	385.23;
357.09	347.32	339.79	327.71	329.5	323.31	360.15	430.61	476.69	401.16	347.17	292.81	285.88	274.92	335.02	375.13	406.6	450.97	436.28	426.51	416.22	385.57	374.02	367.83;
329	313.27	303.42	289.93	288.36	300.81	352.41	368.22	352.34	348.69	334.67	310.36	273.67	156.74	81.95	231.24	350.33	371.43	399.39	389.33	389.33	400.73	389.92	422.21;
484.67	451.11	416.36	428.59	433.73	446.71	448.2	422.1	377.2	351.62	338.57	342.38	311.8	299.42	358.41	418.52	535.15	617.93	701.83	658.43	468.63	443.35	425.45	417.25;
418.97	417.33	416.28	415.24	416.58	427.02	442.83	514.27	702.2	602.65	537.09	485.04	469.45	452.9	430.67	484.74	509.95	515.24	555.29	709.66	729.95	594.67	530.98	425.01;
422.9	415.14	422.52	384.27	398.21	422	453.77	678.9	714.92	537.07	478.38	428.12	406.19	409.85	419.39	464.58	486.66	676.37	838.56	934.09	800.6	647.88	607.76	567.49;
566.81	547.35	558.53	564.5	569.42	603.27	865.02	866.81	733.25	526.69	492.16	487.62	458.09	476.88	479.86	527.81	649.28	892.46	1256.81	1186.04	931.76	794.32	716.4	596.41;
568.08	547.13	533.56	520.66	516.78	534.97	604.03	732.36	762.79	596.57	539.97	507.31	482.03	447.13	486.5	482.4	561.3	752.42	948.02	900	694.11	568.76	501.86	424.46;
148.56	255.5	240.44	215.68	238.05	294.95	316.06	477.45	481.55	420.02	386.39	371.77	371.1	374.83	363.57	371.47	398.39	476.85	452.16	463.65	455.6	451.2	448.36	406.52;
274.38	370.51	380.43	372.82	376.18	364.1	357.01	324.27	281.31	98.45	0.15	0.37	14.47	20.43	20.21	10.89	0.52	356.49	412.95	437.34	394.82	341.87	300.41	211.73;
239.41	99.05	75.55	126.79	148.57	200.03	185.71	269.62	303.63	326.53	313.77	359.72	370.16	360.31	365.76	382.09	393.2	443.03	559.38	558.63	498.96	483.08	479.35	469.65;
466.22	464.58	466	481.14	499.41	575.34	659.54	849.28	743.45	577.5	522.46	474.8	461.3	471.52	481.21	551.69	604.5	834.44	1302.98	1116.89	766.2	614.49	593.39	557.44;
595.93	546.71	513.96	507.03	522.61	539.1	599.51	590.71	537.75	462.42	369.19	368.08	361.51	342.64	276.71	387.32	498.97	496.66	473.09	459.74	435.28	432.67	422.52	411.48;
418.36	424.48	425.9	401.73	394.94	403.82	424.33	465.2	458.71	456.92	468.86	426.12	430.07	444.09	458.34	463.93	566.87	704.41	898.18	871.78	727.97	628.4	619.23	555.45;
589.92	541.52	486.62	433.36	428.14	429.04	447.61	567.25	603.57	471.7	351.09	282.1	245.47	225.93	219.81	184.01	247.41	393.23	474.98	463.72	409.05	386.59	246.52	186.47;
153.65	140.45	92.71	76.38	93.91	106.81	164.24	167	118.89	99.05	125.9	140.45	96.96	73.54	100.24	160.96	369.21	596.17	760.56	786.52	651.89	596.17	566.04	522.11
]

NW=length(P_t_omega_real[:,1])
NP=length(lambda_t_omega_DA[:,1])

#Power system need
NS=7
Scenario_system_need = [rand(Bernoulli(0.5)) for i in 1:NS, r in 1:T]

#Scenario definition
Scenario_list =  [[] for i=1:NW*NP*NS]
k=1
for p in 1:NW
    P_t_omega=P_t_omega_real[p,:]
    for q in 1:NP
        lambda=lambda_t_omega_DA[q,:]
        for r in 1:NS
            n=Scenario_system_need[r,:]
            Scenario_list[k]=[P_t_omega,lambda,n] 
            global k=k+1
        end
    end
end
#In this way we will have Scenario_list[k][1] = P_t_omega_real , Scenario_list[k][2] = lambda_t_omega_DA , Scenario_list[k][3] = Scenario_system_need


#Scenario selection
#number of selected scenario
NSS=250



Index_selected = sample(1:NW*NP*NS, NSS, replace=false)
Selected_scenarios =[[] for i=1:NSS]
for k in 1:NSS
    Selected_scenarios[k] = Scenario_list[Index_selected[k]]
end
#=println("Selected_scenarios:")
println()
println(Selected_scenarios)=#